box: node:8

build:
  steps:
    - samverschueren/npm-private-registry:
      host: $NPM_REGISTRY_HOST
      auth_token: $NPM_REGISTRY_TOKEN

    - script:
        name: run build
        code: ./scripts/build

    - script:
        name: run lint
        code: ./scripts/lint

    - script:
        name: run test
        code: ./scripts/test

  after-steps:
    - install-packages:
      packages: ruby
    - wantedly/pretty-slack-notify:
      webhook_url: $SLACK_WEBHOOK_URL
      channel: dev-ci
      username: wercker-bot
      notify_on: "failed"
