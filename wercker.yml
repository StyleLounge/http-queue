box: node

build:
  steps:
    - samverschueren/npm-private-registry:
      host: $NPM_REGISTRY_HOST
      auth_token: $NPM_REGISTRY_TOKEN

    - script:
      name: npm run build
      code: npm run build

    - script:
      name: npm run lint
      code: npm run lint

    - script:
      name: npm run test
      code: npm run test

  after-steps:
    - install-packages:
      packages: ruby
    - wantedly/pretty-slack-notify:
      webhook_url: $SLACK_WEBHOOK_URL
      channel: dev-ci
      username: wercker-bot
      notify_on: "failed"
